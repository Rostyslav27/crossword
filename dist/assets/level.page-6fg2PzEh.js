import{d as F,o as i,a as v,F as N,b as E,e as r,t as L,p as X,i as Y,_ as T,r as m,c as G,f as O,w as re,j as $,n as P,k as S,g as ie,l as ve,u as Z,m as de,q as ue}from"./index-IELSpVeq.js";import{l as ce}from"./levels-FzXhmg0_.js";const he=w=>(X("data-v-7f4f1b56"),w=w(),Y(),w),fe={class:"keyboard"},_e=["onClick"],xe={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0",y:"0",viewBox:"0 0 24 24",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",class:""},we=he(()=>r("g",null,[r("g",{"data-name":"Layer 2"},[r("g",{"data-name":"backspace"},[r("path",{d:"M20.14 4h-9.77a3 3 0 0 0-2 .78l-.1.11-6 7.48a1 1 0 0 0 .11 1.37l6 5.48a3 3 0 0 0 2 .78h9.77A1.84 1.84 0 0 0 22 18.18V5.82A1.84 1.84 0 0 0 20.14 4zM20 18h-9.63a1 1 0 0 1-.67-.26l-5.33-4.85 5.38-6.67a1 1 0 0 1 .62-.22H20z",fill:"#fff",opacity:"1","data-original":"#fff"}),r("path",{d:"M11.29 14.71a1 1 0 0 0 1.42 0l1.29-1.3 1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L15.41 12l1.3-1.29a1 1 0 0 0-1.42-1.42L14 10.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l1.3 1.29-1.3 1.29a1 1 0 0 0 0 1.42z",fill:"#fff",opacity:"1","data-original":"#fff"})])])],-1)),pe=[we],ge=F({__name:"Keyboard",emits:["enter"],setup(w,{emit:f}){const p=f,u=["Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ф","І","В","А","П","Р","О","Л","Д","Ж","Є","Ї","Я","Ч","С","М","И","Т","Ь","Б","Ю"];return(y,b)=>(i(),v("div",fe,[(i(),v(N,null,E(u,C=>r("button",{class:"keyboard__key",onClick:M=>p("enter",C)},L(C),9,_e)),64)),r("button",{class:"keyboard__key keyboard__key--big",onClick:b[0]||(b[0]=C=>p("enter",""))},[(i(),v("svg",xe,pe))])]))}}),me=T(ge,[["__scopeId","data-v-7f4f1b56"]]),V=w=>(X("data-v-9a481a53"),w=w(),Y(),w),ke={class:"level"},ye={class:"level__header"},We={class:"level__back-arrow",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 492.004 492.004",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},be=V(()=>r("g",null,[r("path",{d:"M382.678 226.804 163.73 7.86C158.666 2.792 151.906 0 144.698 0s-13.968 2.792-19.032 7.86l-16.124 16.12c-10.492 10.504-10.492 27.576 0 38.064L293.398 245.9l-184.06 184.06c-5.064 5.068-7.86 11.824-7.86 19.028 0 7.212 2.796 13.968 7.86 19.04l16.124 16.116c5.068 5.068 11.824 7.86 19.032 7.86s13.968-2.792 19.032-7.86L382.678 265c5.076-5.084 7.864-11.872 7.848-19.088.016-7.244-2.772-14.028-7.848-19.108z",fill:"#0275eb",opacity:"1","data-original":"#0275eb"})],-1)),Ce=[be],Ie={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 24 24",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},ze=V(()=>r("g",null,[r("path",{fill:"#ffc107",d:"m23.363 8.584-7.378-1.127L12.678.413c-.247-.526-1.11-.526-1.357 0L8.015 7.457.637 8.584a.75.75 0 0 0-.423 1.265l5.36 5.494-1.267 7.767a.75.75 0 0 0 1.103.777L12 20.245l6.59 3.643a.75.75 0 0 0 1.103-.777l-1.267-7.767 5.36-5.494a.75.75 0 0 0-.423-1.266z",opacity:"1","data-original":"#ffc107"})],-1)),$e=[ze],Se={class:"level__main"},Le=["viewBox"],Ve=["x","y","width","height"],Me=["transform","onClick"],Be=["fill"],qe=["y"],Ae=["x","y"],Ne={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 492.004 492.004",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},Ee=V(()=>r("g",null,[r("path",{d:"M382.678 226.804 163.73 7.86C158.666 2.792 151.906 0 144.698 0s-13.968 2.792-19.032 7.86l-16.124 16.12c-10.492 10.504-10.492 27.576 0 38.064L293.398 245.9l-184.06 184.06c-5.064 5.068-7.86 11.824-7.86 19.028 0 7.212 2.796 13.968 7.86 19.04l16.124 16.116c5.068 5.068 11.824 7.86 19.032 7.86s13.968-2.792 19.032-7.86L382.678 265c5.076-5.084 7.864-11.872 7.848-19.088.016-7.244-2.772-14.028-7.848-19.108z",fill:"#0275eb",opacity:"1","data-original":"#0275eb"})],-1)),Oe=[Ee],Fe=["title","onClick"],Te={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 492.004 492.004",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},je=V(()=>r("g",null,[r("path",{d:"M382.678 226.804 163.73 7.86C158.666 2.792 151.906 0 144.698 0s-13.968 2.792-19.032 7.86l-16.124 16.12c-10.492 10.504-10.492 27.576 0 38.064L293.398 245.9l-184.06 184.06c-5.064 5.068-7.86 11.824-7.86 19.028 0 7.212 2.796 13.968 7.86 19.04l16.124 16.116c5.068 5.068 11.824 7.86 19.032 7.86s13.968-2.792 19.032-7.86L382.678 265c5.076-5.084 7.864-11.872 7.848-19.088.016-7.244-2.772-14.028-7.848-19.108z",fill:"#0275eb",opacity:"1","data-original":"#0275eb"})],-1)),He=[je],h=10,Je=F({__name:"Level",props:{level:{}},setup(w){var K,U;const f=w,p=h/30,u=p*1.4,y=h/2,b=h*.62,C=h*.27,M=m(h*Math.max(...f.level.words.map(e=>e.vertical?e.xStart+1:e.word.length+e.xStart))||h),j=m(h*Math.max(...f.level.words.map(e=>e.vertical?e.word.length+e.yStart:e.yStart+1))||h),W=m({completed:0,answers:{}}),R=((U=(K=f.level.words.map((e,l)=>[l,e.question.length]).sort((e,l)=>l[1]-e[1]))==null?void 0:K[0])==null?void 0:U[0])||0;W.value=JSON.parse(localStorage.getItem("answers"+f.level.id)||'{ "completed": 0, "answers": {} }')||{completed:0,answers:{}};const a=G(()=>{const e={};for(let l=0;l<f.level.words.length;l++){const n=f.level.words[l];n.word=n.word.toUpperCase();for(let t=0;t<n.word.length;t++){const k=h*(n.xStart+t*+!n.vertical),x=h*(n.yStart+t*+n.vertical),c=k+"-"+x;e[c]||(e[c]={id:c,x:k,y:x,currentValue:W.value.answers[c]||"",correctValue:n.word[t]}),t||(e[c].wordIndex=n.index),n.vertical?e[c].verticalWord={wordIndex:l,letterIndex:t}:e[c].horizontalWord={wordIndex:l,letterIndex:t}}}return e}),d=G(()=>{const e=[],l=Object.values(a.value);for(let n=0;n<l.length;n++){const t=l[n];t.horizontalWord&&(e[t.horizontalWord.wordIndex]||(e[t.horizontalWord.wordIndex]=[]),e[t.horizontalWord.wordIndex][t.horizontalWord.letterIndex]=t),t.verticalWord&&(e[t.verticalWord.wordIndex]||(e[t.verticalWord.wordIndex]=[]),e[t.verticalWord.wordIndex][t.verticalWord.letterIndex]=t)}return e}),_=m([]),g=m({}),ee=e=>{_.value[e]=!d.value[e].some(l=>l.correctValue!=l.currentValue),_.value[e]&&d.value[e].forEach(l=>{g.value[l.id]=!0})},H=()=>{for(let e=0;e<d.value.length;e++)ee(e);W.value.completed=Math.ceil(_.value.filter(e=>e).length/_.value.length*100),localStorage.setItem("answers"+f.level.id,JSON.stringify(W.value))};H();const o=m(""),s=m(-1),te=m(null),I=e=>{var l,n;if(a.value[e]){const t=()=>{var x,c,D;if(o.value===e){let Q=s.value;[a.value[e].horizontalWord,a.value[e].verticalWord].forEach(A=>{A&&A.wordIndex!==s.value&&(Q=A.wordIndex)}),s.value=Q}else a.value[e].verticalWord&&a.value[e].horizontalWord&&[(x=a.value[e].verticalWord)==null?void 0:x.wordIndex,(c=a.value[e].horizontalWord)==null?void 0:c.wordIndex].includes(s.value)||(s.value=((D=a.value[e].horizontalWord||a.value[e].verticalWord)==null?void 0:D.wordIndex)||0)};if([a.value[e].horizontalWord,a.value[e].verticalWord].some(x=>x&&_.value[x.wordIndex])&&a.value[e].verticalWord&&a.value[e].horizontalWord){let x=s.value;[a.value[e].horizontalWord,a.value[e].verticalWord].forEach(c=>{c&&!_.value[c.wordIndex]&&(x=c.wordIndex)}),x!=s.value?s.value=x:t()}else a.value[e].verticalWord&&a.value[e].horizontalWord&&s.value>-1&&o.value?t():s.value=((l=a.value[e].horizontalWord||a.value[e].verticalWord)==null?void 0:l.wordIndex)||0;(n=te.value)==null||n.focus({preventScroll:!0})}else s.value=-1;o.value=e},z=(e,l=!1)=>{if(g.value[o.value])e?S().then(()=>{B()}):S().then(()=>{q()});else{const n=a.value[o.value].currentValue;a.value[o.value].currentValue=e,W.value.answers[o.value]=e,localStorage.setItem("answers"+f.level.id,JSON.stringify(W.value)),H(),e?S().then(()=>{B()}):!n&&!l&&S().then(()=>{q(),z("",!0)})}},le=e=>{o.value&&a.value[o.value]&&z(e)};document.addEventListener("keydown",e=>{o.value&&a.value[o.value]&&(e.key==="Backspace"?z(""):e.key.length===1&&z(e.key[e.key.length-1].toUpperCase()))});const B=()=>{d.value[s.value]&&_.value.some(e=>!e)&&[a.value[o.value].horizontalWord,a.value[o.value].verticalWord].forEach(e=>{e&&e.wordIndex===s.value&&(_.value[s.value]?J():d.value[s.value][e.letterIndex+1]&&(I(d.value[s.value][e.letterIndex+1].id),g.value[o.value]&&B()))})},q=()=>{d.value[s.value]&&_.value.some(e=>!e)&&[a.value[o.value].horizontalWord,a.value[o.value].verticalWord].forEach(e=>{e&&e.wordIndex===s.value&&d.value[s.value][e.letterIndex-1]&&(I(d.value[s.value][e.letterIndex-1].id),g.value[o.value]&&q())})},J=()=>{if(s.value>-1){let e=s.value;const l=()=>{e++,d.value[e]||(e=0),_.value[e]&&l()};_.value.some(t=>!t)&&l();const n=d.value[e].findIndex(t=>!g.value[t.id]);n>-1&&(o.value=d.value[e][n].id,s.value=e)}},ae=()=>{if(s.value>-1){let e=s.value;const l=()=>{e--,d.value[e]||(e=d.value.length-1),_.value[e]&&l()};_.value.some(t=>!t)&&l();const n=d.value[e].findIndex(t=>!g.value[t.id]);n>-1&&(o.value=d.value[e][n].id,s.value=e)}},oe=e=>{var l,n;return g.value[e.id]?"#fff9c3":o.value===e.id?"#55ff82":[(l=e.horizontalWord)==null?void 0:l.wordIndex,(n=e.verticalWord)==null?void 0:n.wordIndex].includes(s.value)?"#c8fec6":"#fff"},ne=()=>{o.value&&a.value[o.value]&&confirm("Використати підказку?")&&z(a.value[o.value].correctValue)},se=e=>{alert(e)};return(e,l)=>{const n=ie("RouterLink");return i(),v("div",ke,[r("div",ye,[O(n,{class:"level__back",to:"/"},{default:re(()=>[(i(),v("svg",We,Ce)),ve(" Назад ")]),_:1}),o.value&&!g.value[o.value]?(i(),v("button",{key:0,class:"level__hint",onClick:ne},[(i(),v("svg",Ie,$e))])):$("",!0)]),r("div",Se,[(i(),v("svg",{class:"level__field",viewBox:`-${p} -${p} ${M.value+u*2} ${j.value+u*2}`},[r("rect",{x:"-"+p,y:"-"+p,width:M.value+u*2,height:j.value+u*2,fill:"#bdbdbd",onClick:l[0]||(l[0]=t=>I(""))},null,8,Ve),(i(!0),v(N,null,E(a.value,t=>(i(),v("g",{transform:`translate(${t.x} ${t.y})`,onClick:k=>I(t.id)},[r("rect",{x:"0",y:"0",width:h,height:h,"stroke-width":p,stroke:"#000",fill:oe(t)},null,8,Be),t.currentValue?(i(),v("text",{key:0,x:y,y:y+u,"font-size":b,"dominant-baseline":"middle","text-anchor":"middle","font-family":"Arial"},L(t.currentValue),9,qe)):$("",!0),t.wordIndex?(i(),v("text",{key:1,x:u,y:u,"font-size":C,"dominant-baseline":"hanging","text-anchor":"start","font-family":"Arial"},L(t.wordIndex),1)):$("",!0)],8,Me))),256)),a.value[o.value]?(i(),v("rect",{key:0,x:a.value[o.value].x,y:a.value[o.value].y,width:h,height:h,"stroke-width":u,stroke:"#000",fill:"none",onClick:l[1]||(l[1]=t=>I(o.value))},null,8,Ae)):$("",!0)],8,Le))]),r("div",{class:P(["level__questions",{"level__questions--visible":a.value[o.value]}])},[r("button",{class:"level__toggle-word level__toggle-word--prev",onClick:l[2]||(l[2]=t=>ae())},[(i(),v("svg",Ne,Oe))]),(i(!0),v(N,null,E(e.level.words,(t,k)=>(i(),v("p",{class:P(["level__question",{"level__question--space":k===Z(R),"level__question--active":s.value===k}]),title:t.question,onClick:x=>se(t.question)},L(t.question),11,Fe))),256)),r("button",{class:"level__toggle-word level__toggle-word--next",onClick:l[3]||(l[3]=t=>J())},[(i(),v("svg",Te,He))])],2),O(me,{class:"level__keyboard",onEnter:le})])}}}),Ke=T(Je,[["__scopeId","data-v-9a481a53"]]),Ue={class:"level-page"},De=F({__name:"level.page",setup(w){const f=de(),p=ue();let u={id:1,name:"test",words:[]};return f.params.levelid?u=ce.find(y=>String(y.id)===f.params.levelid)||u:p.push("/"),(y,b)=>(i(),v("div",Ue,[O(Ke,{level:Z(u)},null,8,["level"])]))}}),Pe=T(De,[["__scopeId","data-v-c031ef81"]]);export{Pe as default};
