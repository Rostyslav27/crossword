import{d as A,o as v,a as d,F as q,b as B,e as r,t as S,p as G,i as P,_ as E,r as g,c as D,f as N,w as re,j as $,n as Q,k as M,g as ie,l as ve,u as X,m as de,q as ue}from"./index-nnQ-VL28.js";import{l as ce}from"./levels-WIb7_k_b.js";const he=p=>(G("data-v-802b0fd7"),p=p(),P(),p),_e={class:"keyboard"},fe=["onClick"],xe={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0",y:"0",viewBox:"0 0 24 24",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",class:""},pe=he(()=>r("g",null,[r("g",{"data-name":"Layer 2"},[r("g",{"data-name":"backspace"},[r("path",{d:"M20.14 4h-9.77a3 3 0 0 0-2 .78l-.1.11-6 7.48a1 1 0 0 0 .11 1.37l6 5.48a3 3 0 0 0 2 .78h9.77A1.84 1.84 0 0 0 22 18.18V5.82A1.84 1.84 0 0 0 20.14 4zM20 18h-9.63a1 1 0 0 1-.67-.26l-5.33-4.85 5.38-6.67a1 1 0 0 1 .62-.22H20z",fill:"#fff",opacity:"1","data-original":"#fff"}),r("path",{d:"M11.29 14.71a1 1 0 0 0 1.42 0l1.29-1.3 1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L15.41 12l1.3-1.29a1 1 0 0 0-1.42-1.42L14 10.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l1.3 1.29-1.3 1.29a1 1 0 0 0 0 1.42z",fill:"#fff",opacity:"1","data-original":"#fff"})])])],-1)),we=[pe],ge=A({__name:"Keyboard",emits:["enter"],setup(p,{emit:h}){const x=h,_=["Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ф","І","В","А","П","Р","О","Л","Д","Ж","Є","Ї","Я","Ч","С","М","И","Т","Ь","Б","Ю"];return(y,b)=>(v(),d("div",_e,[(v(),d(q,null,B(_,C=>r("button",{class:"keyboard__key",onClick:L=>x("enter",C)},S(C),9,fe)),64)),r("button",{class:"keyboard__key keyboard__key--big",onClick:b[0]||(b[0]=C=>x("enter",""))},[(v(),d("svg",xe,we))])]))}}),me=E(ge,[["__scopeId","data-v-802b0fd7"]]),O=p=>(G("data-v-f353646a"),p=p(),P(),p),ke={class:"level"},ye={class:"level__header"},We={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 24 24",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},be=O(()=>r("g",null,[r("path",{fill:"#ffc107",d:"m23.363 8.584-7.378-1.127L12.678.413c-.247-.526-1.11-.526-1.357 0L8.015 7.457.637 8.584a.75.75 0 0 0-.423 1.265l5.36 5.494-1.267 7.767a.75.75 0 0 0 1.103.777L12 20.245l6.59 3.643a.75.75 0 0 0 1.103-.777l-1.267-7.767 5.36-5.494a.75.75 0 0 0-.423-1.266z",opacity:"1","data-original":"#ffc107"})],-1)),Ce=[be],ze={class:"level__main"},Ie=["viewBox"],$e=["x","y","width","height"],Se=["transform","onClick"],Le=["fill"],Ve=["y"],Me=["x","y"],qe={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 492.004 492.004",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},Be=O(()=>r("g",null,[r("path",{d:"M382.678 226.804 163.73 7.86C158.666 2.792 151.906 0 144.698 0s-13.968 2.792-19.032 7.86l-16.124 16.12c-10.492 10.504-10.492 27.576 0 38.064L293.398 245.9l-184.06 184.06c-5.064 5.068-7.86 11.824-7.86 19.028 0 7.212 2.796 13.968 7.86 19.04l16.124 16.116c5.068 5.068 11.824 7.86 19.032 7.86s13.968-2.792 19.032-7.86L382.678 265c5.076-5.084 7.864-11.872 7.848-19.088.016-7.244-2.772-14.028-7.848-19.108z",fill:"#0275eb",opacity:"1","data-original":"#0275eb"})],-1)),Ne=[Be],Ae=["title","onClick"],Ee={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 492.004 492.004",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},Oe=O(()=>r("g",null,[r("path",{d:"M382.678 226.804 163.73 7.86C158.666 2.792 151.906 0 144.698 0s-13.968 2.792-19.032 7.86l-16.124 16.12c-10.492 10.504-10.492 27.576 0 38.064L293.398 245.9l-184.06 184.06c-5.064 5.068-7.86 11.824-7.86 19.028 0 7.212 2.796 13.968 7.86 19.04l16.124 16.116c5.068 5.068 11.824 7.86 19.032 7.86s13.968-2.792 19.032-7.86L382.678 265c5.076-5.084 7.864-11.872 7.848-19.088.016-7.244-2.772-14.028-7.848-19.108z",fill:"#0275eb",opacity:"1","data-original":"#0275eb"})],-1)),Fe=[Oe],c=10,je=A({__name:"Level",props:{level:{}},setup(p){var J,K;const h=p,x=c/30,_=x*1.4,y=c/2,b=c*.65,C=c*.3,L=g(c*Math.max(...h.level.words.map(e=>e.vertical?e.xStart+1:e.word.length+e.xStart))||c),F=g(c*Math.max(...h.level.words.map(e=>e.vertical?e.word.length+e.yStart:e.yStart+1))||c),W=g({completed:0,answers:{}}),Y=((K=(J=h.level.words.map((e,l)=>[l,e.question.length]).sort((e,l)=>l[1]-e[1]))==null?void 0:J[0])==null?void 0:K[0])||0;W.value=JSON.parse(localStorage.getItem("answers"+h.level.id)||'{ "completed": 0, "answers": {} }')||{completed:0,answers:{}};const o=D(()=>{const e={};for(let l=0;l<h.level.words.length;l++){const a=h.level.words[l];a.word=a.word.toUpperCase();for(let t=0;t<a.word.length;t++){const k=c*(a.xStart+t*+!a.vertical),f=c*(a.yStart+t*+a.vertical),u=k+"-"+f;e[u]||(e[u]={id:u,x:k,y:f,currentValue:W.value.answers[u]||"",correctValue:a.word[t]}),t||(e[u].wordIndex=a.index),a.vertical?e[u].verticalWord={wordIndex:l,letterIndex:t}:e[u].horizontalWord={wordIndex:l,letterIndex:t}}}return e}),i=D(()=>{const e=[],l=Object.values(o.value);for(let a=0;a<l.length;a++){const t=l[a];t.horizontalWord&&(e[t.horizontalWord.wordIndex]||(e[t.horizontalWord.wordIndex]=[]),e[t.horizontalWord.wordIndex][t.horizontalWord.letterIndex]=t),t.verticalWord&&(e[t.verticalWord.wordIndex]||(e[t.verticalWord.wordIndex]=[]),e[t.verticalWord.wordIndex][t.verticalWord.letterIndex]=t)}return e}),w=g([]),z=g({}),Z=e=>{w.value[e]=!i.value[e].some(l=>l.correctValue!=l.currentValue),w.value[e]&&i.value[e].forEach(l=>{z.value[l.id]=!0})},j=()=>{for(let e=0;e<i.value.length;e++)Z(e);W.value.completed=Math.ceil(w.value.filter(e=>e).length/w.value.length*100),localStorage.setItem("answers"+h.level.id,JSON.stringify(W.value))};j();const n=g(""),s=g(-1),R=g(null),m=e=>{var l,a;if(o.value[e]){const t=()=>{var f,u,T;if(n.value===e){let U=s.value;[o.value[e].horizontalWord,o.value[e].verticalWord].forEach(V=>{V&&V.wordIndex!==s.value&&(U=V.wordIndex)}),s.value=U}else o.value[e].verticalWord&&o.value[e].horizontalWord&&[(f=o.value[e].verticalWord)==null?void 0:f.wordIndex,(u=o.value[e].horizontalWord)==null?void 0:u.wordIndex].includes(s.value)||(s.value=((T=o.value[e].horizontalWord||o.value[e].verticalWord)==null?void 0:T.wordIndex)||0)};if([o.value[e].horizontalWord,o.value[e].verticalWord].some(f=>f&&w.value[f.wordIndex])&&o.value[e].verticalWord&&o.value[e].horizontalWord){let f=s.value;[o.value[e].horizontalWord,o.value[e].verticalWord].forEach(u=>{u&&!w.value[u.wordIndex]&&(f=u.wordIndex)}),f!=s.value?s.value=f:t()}else o.value[e].verticalWord&&o.value[e].horizontalWord&&s.value>-1&&n.value?t():s.value=((l=o.value[e].horizontalWord||o.value[e].verticalWord)==null?void 0:l.wordIndex)||0;(a=R.value)==null||a.focus({preventScroll:!0})}else s.value=-1;n.value=e},I=e=>{z.value[n.value]?M().then(()=>{H()}):(o.value[n.value].currentValue=e,W.value.answers[n.value]=e,localStorage.setItem("answers"+h.level.id,JSON.stringify(W.value)),j(),e?M().then(()=>{H()}):M().then(()=>{te()}))},ee=e=>{n.value&&o.value[n.value]&&I(e)};document.addEventListener("keydown",e=>{n.value&&o.value[n.value]&&(e.key==="Backspace"?I(""):I(e.key[e.key.length-1].toUpperCase()))});const H=()=>{i.value[s.value]&&[o.value[n.value].horizontalWord,o.value[n.value].verticalWord].forEach(e=>{e&&e.wordIndex===s.value&&i.value[s.value][e.letterIndex+1]&&m(i.value[s.value][e.letterIndex+1].id)})},te=()=>{i.value[s.value]&&[o.value[n.value].horizontalWord,o.value[n.value].verticalWord].forEach(e=>{e&&e.wordIndex===s.value&&i.value[s.value][e.letterIndex-1]&&m(i.value[s.value][e.letterIndex-1].id)})},le=()=>{if(s.value>-1){let e=s.value+1;i.value[e]||(e=0);const l=()=>{w.value[e]&&(e++,i.value[e]||(e=0),l())};w.value.some(a=>!a)&&l(),m(i.value[e][0].id)}},oe=()=>{if(s.value>-1){let e=s.value-1;i.value[e]||(e=i.value.length-1);const l=()=>{w.value[e]&&(e--,i.value[e]||(e=i.value.length-1),l())};w.value.some(a=>!a)&&l(),m(i.value[e][0].id)}},ae=e=>{var l,a;return z.value[e.id]?"#fff9c3":n.value===e.id?"#55ff82":[(l=e.horizontalWord)==null?void 0:l.wordIndex,(a=e.verticalWord)==null?void 0:a.wordIndex].includes(s.value)?"#c8fec6":"#fff"},ne=()=>{n.value&&o.value[n.value]&&confirm("Використати підказку?")&&I(o.value[n.value].correctValue)},se=e=>{alert(e)};return(e,l)=>{const a=ie("RouterLink");return v(),d("div",ke,[r("div",ye,[N(a,{class:"level__back",to:"/"},{default:re(()=>[ve("Назад")]),_:1}),n.value&&!z.value[n.value]?(v(),d("button",{key:0,class:"level__hint",onClick:ne},[(v(),d("svg",We,Ce))])):$("",!0)]),r("div",ze,[(v(),d("svg",{class:"level__field",viewBox:`-${x} -${x} ${L.value+_*2} ${F.value+_*2}`},[r("rect",{x:"-"+x,y:"-"+x,width:L.value+_*2,height:F.value+_*2,fill:"#bdbdbd",onClick:l[0]||(l[0]=t=>m(""))},null,8,$e),(v(!0),d(q,null,B(o.value,t=>(v(),d("g",{transform:`translate(${t.x} ${t.y})`,onClick:k=>m(t.id)},[r("rect",{x:"0",y:"0",width:c,height:c,"stroke-width":x,stroke:"#000",fill:ae(t)},null,8,Le),t.currentValue?(v(),d("text",{key:0,x:y,y:y+x,"font-size":b,"dominant-baseline":"middle","text-anchor":"middle","font-family":"Arial"},S(t.currentValue),9,Ve)):$("",!0),t.wordIndex?(v(),d("text",{key:1,x:_,y:_,"font-size":C,"dominant-baseline":"hanging","text-anchor":"start","font-family":"Arial"},S(t.wordIndex),1)):$("",!0)],8,Se))),256)),o.value[n.value]?(v(),d("rect",{key:0,x:o.value[n.value].x,y:o.value[n.value].y,width:c,height:c,"stroke-width":_,stroke:"#000",fill:"none",onClick:l[1]||(l[1]=t=>m(n.value))},null,8,Me)):$("",!0)],8,Ie))]),r("div",{class:Q(["level__questions",{"level__questions--visible":o.value[n.value]}])},[r("button",{class:"level__toggle-word level__toggle-word--prev",onClick:l[2]||(l[2]=t=>oe())},[(v(),d("svg",qe,Ne))]),(v(!0),d(q,null,B(e.level.words,(t,k)=>(v(),d("p",{class:Q(["level__question",{"level__question--space":k===X(Y),"level__question--active":s.value===k}]),title:t.question,onClick:f=>se(t.question)},S(t.question),11,Ae))),256)),r("button",{class:"level__toggle-word level__toggle-word--next",onClick:l[3]||(l[3]=t=>le())},[(v(),d("svg",Ee,Fe))])],2),N(me,{class:"level__keyboard",onEnter:ee})])}}}),He=E(je,[["__scopeId","data-v-f353646a"]]),Je={class:"level-page"},Ke=A({__name:"level.page",setup(p){const h=de(),x=ue();let _={id:1,name:"test",words:[]};return h.params.levelid?_=ce.find(y=>String(y.id)===h.params.levelid)||_:x.push("/"),(y,b)=>(v(),d("div",Je,[N(He,{level:X(_)},null,8,["level"])]))}}),De=E(Ke,[["__scopeId","data-v-c031ef81"]]);export{De as default};
