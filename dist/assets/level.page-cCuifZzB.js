import{d as A,o as v,a as d,F as B,b as N,e as s,t as $,p as G,i as P,_ as E,r as g,c as D,f as q,w as re,j as S,n as Q,k as M,g as se,l as ie,u as X,m as ve,q as de}from"./index-qvuGbXDy.js";import{l as ue}from"./levels-WIb7_k_b.js";const ce=p=>(G("data-v-802b0fd7"),p=p(),P(),p),he={class:"keyboard"},_e=["onClick"],fe={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0",y:"0",viewBox:"0 0 24 24",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",class:""},xe=ce(()=>s("g",null,[s("g",{"data-name":"Layer 2"},[s("g",{"data-name":"backspace"},[s("path",{d:"M20.14 4h-9.77a3 3 0 0 0-2 .78l-.1.11-6 7.48a1 1 0 0 0 .11 1.37l6 5.48a3 3 0 0 0 2 .78h9.77A1.84 1.84 0 0 0 22 18.18V5.82A1.84 1.84 0 0 0 20.14 4zM20 18h-9.63a1 1 0 0 1-.67-.26l-5.33-4.85 5.38-6.67a1 1 0 0 1 .62-.22H20z",fill:"#fff",opacity:"1","data-original":"#fff"}),s("path",{d:"M11.29 14.71a1 1 0 0 0 1.42 0l1.29-1.3 1.29 1.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L15.41 12l1.3-1.29a1 1 0 0 0-1.42-1.42L14 10.59l-1.29-1.3a1 1 0 0 0-1.42 1.42l1.3 1.29-1.3 1.29a1 1 0 0 0 0 1.42z",fill:"#fff",opacity:"1","data-original":"#fff"})])])],-1)),pe=[xe],we=A({__name:"Keyboard",emits:["enter"],setup(p,{emit:h}){const f=h,_=["Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ф","І","В","А","П","Р","О","Л","Д","Ж","Є","Ї","Я","Ч","С","М","И","Т","Ь","Б","Ю"];return(y,b)=>(v(),d("div",he,[(v(),d(B,null,N(_,C=>s("button",{class:"keyboard__key",onClick:L=>f("enter",C)},$(C),9,_e)),64)),s("button",{class:"keyboard__key keyboard__key--big",onClick:b[0]||(b[0]=C=>f("enter",""))},[(v(),d("svg",fe,pe))])]))}}),ge=E(we,[["__scopeId","data-v-802b0fd7"]]),O=p=>(G("data-v-6c0c2e65"),p=p(),P(),p),me={class:"level"},ke={class:"level__header"},ye={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 24 24",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},We=O(()=>s("g",null,[s("path",{fill:"#ffc107",d:"m23.363 8.584-7.378-1.127L12.678.413c-.247-.526-1.11-.526-1.357 0L8.015 7.457.637 8.584a.75.75 0 0 0-.423 1.265l5.36 5.494-1.267 7.767a.75.75 0 0 0 1.103.777L12 20.245l6.59 3.643a.75.75 0 0 0 1.103-.777l-1.267-7.767 5.36-5.494a.75.75 0 0 0-.423-1.266z",opacity:"1","data-original":"#ffc107"})],-1)),be=[We],Ce={class:"level__main"},ze=["viewBox"],Ie=["x","y","width","height"],Se=["transform","onClick"],$e=["fill"],Le=["y"],Ve=["x","y"],Me={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 492.004 492.004",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},Be=O(()=>s("g",null,[s("path",{d:"M382.678 226.804 163.73 7.86C158.666 2.792 151.906 0 144.698 0s-13.968 2.792-19.032 7.86l-16.124 16.12c-10.492 10.504-10.492 27.576 0 38.064L293.398 245.9l-184.06 184.06c-5.064 5.068-7.86 11.824-7.86 19.028 0 7.212 2.796 13.968 7.86 19.04l16.124 16.116c5.068 5.068 11.824 7.86 19.032 7.86s13.968-2.792 19.032-7.86L382.678 265c5.076-5.084 7.864-11.872 7.848-19.088.016-7.244-2.772-14.028-7.848-19.108z",fill:"#0275eb",opacity:"1","data-original":"#0275eb"})],-1)),Ne=[Be],qe={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 492.004 492.004",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},Ae=O(()=>s("g",null,[s("path",{d:"M382.678 226.804 163.73 7.86C158.666 2.792 151.906 0 144.698 0s-13.968 2.792-19.032 7.86l-16.124 16.12c-10.492 10.504-10.492 27.576 0 38.064L293.398 245.9l-184.06 184.06c-5.064 5.068-7.86 11.824-7.86 19.028 0 7.212 2.796 13.968 7.86 19.04l16.124 16.116c5.068 5.068 11.824 7.86 19.032 7.86s13.968-2.792 19.032-7.86L382.678 265c5.076-5.084 7.864-11.872 7.848-19.088.016-7.244-2.772-14.028-7.848-19.108z",fill:"#0275eb",opacity:"1","data-original":"#0275eb"})],-1)),Ee=[Ae],c=10,Oe=A({__name:"Level",props:{level:{}},setup(p){var J,K;const h=p,f=c/30,_=f*1.4,y=c/2,b=c*.65,C=c*.3,L=g(c*Math.max(...h.level.words.map(e=>e.vertical?e.xStart+1:e.word.length+e.xStart))||c),F=g(c*Math.max(...h.level.words.map(e=>e.vertical?e.word.length+e.yStart:e.yStart+1))||c),W=g({completed:0,answers:{}}),Y=((K=(J=h.level.words.map((e,l)=>[l,e.question.length]).sort((e,l)=>l[1]-e[1]))==null?void 0:J[0])==null?void 0:K[0])||0;W.value=JSON.parse(localStorage.getItem("answers"+h.level.id)||'{ "completed": 0, "answers": {} }')||{completed:0,answers:{}};const o=D(()=>{const e={};for(let l=0;l<h.level.words.length;l++){const a=h.level.words[l];a.word=a.word.toUpperCase();for(let t=0;t<a.word.length;t++){const k=c*(a.xStart+t*+!a.vertical),x=c*(a.yStart+t*+a.vertical),u=k+"-"+x;e[u]||(e[u]={id:u,x:k,y:x,currentValue:W.value.answers[u]||"",correctValue:a.word[t]}),t||(e[u].wordIndex=a.index),a.vertical?e[u].verticalWord={wordIndex:l,letterIndex:t}:e[u].horizontalWord={wordIndex:l,letterIndex:t}}}return e}),i=D(()=>{const e=[],l=Object.values(o.value);for(let a=0;a<l.length;a++){const t=l[a];t.horizontalWord&&(e[t.horizontalWord.wordIndex]||(e[t.horizontalWord.wordIndex]=[]),e[t.horizontalWord.wordIndex][t.horizontalWord.letterIndex]=t),t.verticalWord&&(e[t.verticalWord.wordIndex]||(e[t.verticalWord.wordIndex]=[]),e[t.verticalWord.wordIndex][t.verticalWord.letterIndex]=t)}return e}),w=g([]),z=g({}),Z=e=>{w.value[e]=!i.value[e].some(l=>l.correctValue!=l.currentValue),w.value[e]&&i.value[e].forEach(l=>{z.value[l.id]=!0})},j=()=>{for(let e=0;e<i.value.length;e++)Z(e);W.value.completed=Math.ceil(w.value.filter(e=>e).length/w.value.length*100),localStorage.setItem("answers"+h.level.id,JSON.stringify(W.value))};j();const n=g(""),r=g(-1),R=g(null),m=e=>{var l,a;if(o.value[e]){const t=()=>{var x,u,T;if(n.value===e){let U=r.value;[o.value[e].horizontalWord,o.value[e].verticalWord].forEach(V=>{V&&V.wordIndex!==r.value&&(U=V.wordIndex)}),r.value=U}else o.value[e].verticalWord&&o.value[e].horizontalWord&&[(x=o.value[e].verticalWord)==null?void 0:x.wordIndex,(u=o.value[e].horizontalWord)==null?void 0:u.wordIndex].includes(r.value)||(r.value=((T=o.value[e].horizontalWord||o.value[e].verticalWord)==null?void 0:T.wordIndex)||0)};if([o.value[e].horizontalWord,o.value[e].verticalWord].some(x=>x&&w.value[x.wordIndex])&&o.value[e].verticalWord&&o.value[e].horizontalWord){let x=r.value;[o.value[e].horizontalWord,o.value[e].verticalWord].forEach(u=>{u&&!w.value[u.wordIndex]&&(x=u.wordIndex)}),x!=r.value?r.value=x:t()}else o.value[e].verticalWord&&o.value[e].horizontalWord&&r.value>-1&&n.value?t():r.value=((l=o.value[e].horizontalWord||o.value[e].verticalWord)==null?void 0:l.wordIndex)||0;(a=R.value)==null||a.focus({preventScroll:!0})}else r.value=-1;n.value=e},I=e=>{z.value[n.value]?M().then(()=>{H()}):(o.value[n.value].currentValue=e,W.value.answers[n.value]=e,localStorage.setItem("answers"+h.level.id,JSON.stringify(W.value)),j(),e?M().then(()=>{H()}):M().then(()=>{te()}))},ee=e=>{n.value&&o.value[n.value]&&I(e)};document.addEventListener("keydown",e=>{n.value&&o.value[n.value]&&(e.key==="Backspace"?I(""):I(e.key[e.key.length-1].toUpperCase()))});const H=()=>{i.value[r.value]&&[o.value[n.value].horizontalWord,o.value[n.value].verticalWord].forEach(e=>{e&&e.wordIndex===r.value&&i.value[r.value][e.letterIndex+1]&&m(i.value[r.value][e.letterIndex+1].id)})},te=()=>{i.value[r.value]&&[o.value[n.value].horizontalWord,o.value[n.value].verticalWord].forEach(e=>{e&&e.wordIndex===r.value&&i.value[r.value][e.letterIndex-1]&&m(i.value[r.value][e.letterIndex-1].id)})},le=()=>{if(r.value>-1){let e=r.value+1;i.value[e]||(e=0);const l=()=>{w.value[e]&&(e++,i.value[e]||(e=0),l())};w.value.some(a=>!a)&&l(),m(i.value[e][0].id)}},oe=()=>{if(r.value>-1){let e=r.value-1;i.value[e]||(e=i.value.length-1);const l=()=>{w.value[e]&&(e--,i.value[e]||(e=i.value.length-1),l())};w.value.some(a=>!a)&&l(),m(i.value[e][0].id)}},ae=e=>{var l,a;return z.value[e.id]?"#fff9c3":n.value===e.id?"#55ff82":[(l=e.horizontalWord)==null?void 0:l.wordIndex,(a=e.verticalWord)==null?void 0:a.wordIndex].includes(r.value)?"#c8fec6":"#fff"},ne=()=>{n.value&&o.value[n.value]&&confirm("Використати підказку?")&&I(o.value[n.value].correctValue)};return(e,l)=>{const a=se("RouterLink");return v(),d("div",me,[s("div",ke,[q(a,{class:"level__back",to:"/"},{default:re(()=>[ie("Назад")]),_:1}),n.value&&!z.value[n.value]?(v(),d("button",{key:0,class:"level__hint",onClick:ne},[(v(),d("svg",ye,be))])):S("",!0)]),s("div",Ce,[(v(),d("svg",{class:"level__field",viewBox:`-${f} -${f} ${L.value+_*2} ${F.value+_*2}`},[s("rect",{x:"-"+f,y:"-"+f,width:L.value+_*2,height:F.value+_*2,fill:"#bdbdbd",onClick:l[0]||(l[0]=t=>m(""))},null,8,Ie),(v(!0),d(B,null,N(o.value,t=>(v(),d("g",{transform:`translate(${t.x} ${t.y})`,onClick:k=>m(t.id)},[s("rect",{x:"0",y:"0",width:c,height:c,"stroke-width":f,stroke:"#000",fill:ae(t)},null,8,$e),t.currentValue?(v(),d("text",{key:0,x:y,y:y+f,"font-size":b,"dominant-baseline":"middle","text-anchor":"middle","font-family":"Arial"},$(t.currentValue),9,Le)):S("",!0),t.wordIndex?(v(),d("text",{key:1,x:_,y:_,"font-size":C,"dominant-baseline":"hanging","text-anchor":"start","font-family":"Arial"},$(t.wordIndex),1)):S("",!0)],8,Se))),256)),o.value[n.value]?(v(),d("rect",{key:0,x:o.value[n.value].x,y:o.value[n.value].y,width:c,height:c,"stroke-width":_,stroke:"#000",fill:"none",onClick:l[1]||(l[1]=t=>m(n.value))},null,8,Ve)):S("",!0)],8,ze))]),s("div",{class:Q(["level__questions",{"level__questions--visible":o.value[n.value]}])},[s("button",{class:"level__toggle-word level__toggle-word--prev",onClick:l[2]||(l[2]=t=>oe())},[(v(),d("svg",Me,Ne))]),(v(!0),d(B,null,N(e.level.words,(t,k)=>(v(),d("p",{class:Q(["level__question",{"level__question--space":k===X(Y),"level__question--active":r.value===k}])},$(t.question),3))),256)),s("button",{class:"level__toggle-word level__toggle-word--next",onClick:l[3]||(l[3]=t=>le())},[(v(),d("svg",qe,Ee))])],2),q(ge,{class:"level__keyboard",onEnter:ee})])}}}),Fe=E(Oe,[["__scopeId","data-v-6c0c2e65"]]),je={class:"level-page"},He=A({__name:"level.page",setup(p){const h=ve(),f=de();let _={id:1,name:"test",words:[]};return h.params.levelid?_=ue.find(y=>String(y.id)===h.params.levelid)||_:f.push("/"),(y,b)=>(v(),d("div",je,[q(Fe,{level:X(_)},null,8,["level"])]))}}),Te=E(He,[["__scopeId","data-v-c031ef81"]]);export{Te as default};
